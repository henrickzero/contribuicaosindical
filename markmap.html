<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="ie=edge">
<title>Markmap</title>
<style>
* {
  margin: 0;
  padding: 0;
}
#mindmap {
  display: block;
  width: 100vw;
  height: 100vh;
}
</style>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/markmap-toolbar@0.16.0/dist/style.css">
</head>
<body>
<svg id="mindmap"></svg>
<script src="https://cdn.jsdelivr.net/npm/d3@7.8.5/dist/d3.min.js"></script><script src="https://cdn.jsdelivr.net/npm/markmap-view@0.16.0/dist/browser/index.js"></script><script src="https://cdn.jsdelivr.net/npm/markmap-toolbar@0.16.0/dist/index.js"></script><script>(()=>{setTimeout(()=>{const{markmap:H,mm:ae}=window,W=new H.Toolbar;W.attach(ae);const we=W.render();we.setAttribute("style","position:absolute;bottom:20px;right:20px"),document.body.append(we)})})()</script><script>((o,T,c,r)=>{const g=o();window.mm=g.Markmap.create("svg#mindmap",(T||g.deriveOptions)(r),c)})(()=>window.markmap,null,{"content":"Order-service","children":[{"content":"Time Responsável","children":[{"content":"Time Pedidos","children":[{"content":"Líder Técnico: Joao Schmidt","children":[],"payload":{"lines":"8,9"}},{"content":"P.O.: Luiz Menezes","children":[],"payload":{"lines":"9,11"}}],"payload":{"lines":"7,11"}}],"payload":{"lines":"5,6"}},{"content":"Dependências","children":[{"content":"Banco de dados: Oracle (Cartão)","children":[],"payload":{"lines":"12,13"}},{"content":"Serviços:","children":[{"content":"<a href=\"http://gitlab.dimed.com.br/varejo/plataforma/payment-gateway-service\">payment-gateway-service</a>","children":[],"payload":{"lines":"14,15"}},{"content":"<a href=\"http://gitlab.dimed.com.br/varejo/crossover/service/customer-service\">customer-service</a>","children":[],"payload":{"lines":"15,16"}},{"content":"<a href=\"http://gitlab.dimed.com.br/varejo/digital/service/shipping-service\">shipping-service</a>","children":[],"payload":{"lines":"16,17"}},{"content":"<a href=\"http://gitlab.dimed.com.br/varejo/tio-patinhas/distributor-stock-service\">distributor-stock-service</a>","children":[],"payload":{"lines":"17,18"}},{"content":"<a href=\"http://gitlab.dimed.com.br/varejo/xadrez/mostruario-service\">mostruario-service</a>","children":[],"payload":{"lines":"18,19"}},{"content":"<a href=\"http://gitlab.dimed.com.br/varejo/xadrez/filial-service\">filial-service</a>","children":[],"payload":{"lines":"19,20"}},{"content":"<a href=\"http://gitlab.dimed.com.br/varejo/tio-patinhas/private-card-service\">private-card-service</a>","children":[],"payload":{"lines":"20,21"}}],"payload":{"lines":"13,21"}},{"content":"Tópicos Kafka:","children":[{"content":"<strong>PEDIDO-ANALISADO</strong>: Recebe a resposta do gateway de pagamento para tomar a ação<br>\nnecessária: Pedir confirmação de pagamento ou cancelar o pedido","children":[],"payload":{"lines":"22,24"}},{"content":"<strong>PAGAMENTO-AUTORIZADO</strong>: Escreve neste tópico para solicitar a confirmação de<br>\npagamento em caso de resposta positiva do gateway de pagamento","children":[],"payload":{"lines":"24,26"}},{"content":"<strong>PEDIDO-CANCELADO</strong>: Escreve neste tópico depois de cancelar o pedido em caso<br>\nde resposta negativa do gateway de pagamento","children":[],"payload":{"lines":"26,28"}},{"content":"<strong>PAGAMENTO-CONFIRMADO</strong>: Recebe a resposta do gateway depois de confirmar o<br>\npagamento para que o status de pedido seja atualizado","children":[],"payload":{"lines":"28,30"}},{"content":"<strong>PAGAMENTO-CONFIRMADO-CARTEIRA-DIGITAL</strong>: Recebe a resposta do gateway depois de confirmar o<br>\npagamento de uma carteira digital ( PIX, PICPAY ) para que o status de pedido seja atualizado","children":[],"payload":{"lines":"30,32"}},{"content":"<strong>ORDER_GROUP</strong>: Escreve nesse tópico o agrupador de pedidos","children":[],"payload":{"lines":"32,33"}},{"content":"<strong>PEDIDO_ERRO_PAGAMENTO</strong>: Escreve qualquer erro de pagamento de um pedido","children":[],"payload":{"lines":"33,34"}},{"content":"<strong>PEDIDO-STATUS-CANCELADO</strong>: Escreve e consome toda vez que um pedido é cancelado","children":[],"payload":{"lines":"34,36"}}],"payload":{"lines":"21,36"}}],"payload":{"lines":"11,12"}},{"content":"Feature Toggle","children":[{"content":"<strong>enable.new.order.sequence</strong>: Habilita o Split de pedidos por entrega","children":[],"payload":{"lines":"38,39"}},{"content":"<strong>ativa.pip</strong>: Habilita as funcionalidades e pesquisas usando o recurso do PIP ( Prateleira infinita Panvel )","children":[],"payload":{"lines":"39,40"}},{"content":"<strong>app.validate.discount</strong>: Habilita a validacao de descontos em itens atraves do mostruario","children":[],"payload":{"lines":"40,41"}},{"content":"<strong>app.validate.pack</strong>: Habilita a validacao de packs nos itens","children":[],"payload":{"lines":"41,42"}},{"content":"<strong>enable.kafka.consumer.order.cancel</strong>: Habilita o consumer e o producer Kafka do Tópico PEDIDO-STATUS-CANCELADO","children":[],"payload":{"lines":"42,43"}},{"content":"<strong>enable.blacklist.validation</strong>: Habilita a validacao de cliente em blacklist","children":[],"payload":{"lines":"43,45"}}],"payload":{"lines":"36,37"}},{"content":"Parametros","children":[{"content":"<strong>digitalwallet.pix.default-psp-code</strong>: Código PSP Padrão para o PIX, caso não exista um PSP cadastrado para a filial","children":[],"payload":{"lines":"47,48"}},{"content":"<strong>digitalwallet.pix.expiration-minutes</strong>: Tempo em minutos para expirar um PIX","children":[],"payload":{"lines":"48,49"}},{"content":"<strong>ccr.realize.default-covenant-subsidiary-code</strong>: Código de Filial do Convênio Padrão, que é usada caso não tenha sido cadastrada uma para a filial do pedido","children":[],"payload":{"lines":"49,50"}},{"content":"<strong>ccr.realize.default-covenant-code</strong>: Código do Convênio Padrão, que é usada caso não tenha sido cadastrada uma para a filial do pedido","children":[],"payload":{"lines":"50,51"}},{"content":"<strong>ccr.realize.default-psp-code</strong>: Código PSP da Realize","children":[],"payload":{"lines":"51,53"}}],"payload":{"lines":"45,46"}},{"content":"Swagger","children":[{"content":"Acesso a documentação do Swagger Local: http://localhost:9044/order/swagger-ui/index.html#/","children":[],"payload":{"lines":"55,56"}},{"content":"Acesso a documentação do Swagger Hml: http://order-service.kb8s.hml.dimed.com.br/order/swagger-ui/index.html#/","children":[],"payload":{"lines":"56,57"}},{"content":"Acesso a documentação do Swagger Prd: http://order-service.kb8s.prd.dimed.com.br/order/swagger-ui/index.html#/","children":[],"payload":{"lines":"57,59"}}],"payload":{"lines":"53,54"}},{"content":"Endpoints","children":[{"content":"Ecommerce","children":[{"content":"<a href=\"#post-ecommerce-order\">Criar Pedido Ecommerce</a>","children":[],"payload":{"lines":"62,63"}},{"content":"<a href=\"#post-ecommerce-panvel-pay\">Pagar com Panvel Pay</a>","children":[],"payload":{"lines":"63,64"}}],"payload":{"lines":"61,62"}},{"content":"Gestao de Pedidos","children":[{"content":"<a href=\"#post-order\">Criar Pedido</a>","children":[],"payload":{"lines":"65,66"}},{"content":"<a href=\"#get-order-by-id\">Consulta de Pedido por ID</a>","children":[],"payload":{"lines":"66,67"}},{"content":"<a href=\"#get-customer-orders\">Historico de Pedidos do Cliente</a>","children":[],"payload":{"lines":"67,68"}},{"content":"<a href=\"#get-status-update\">Historico de Alteracao de Status de Pedido</a>","children":[],"payload":{"lines":"68,69"}},{"content":"<a href=\"#get-cancellation-reasons\">Consulta de Razoes de Cancelamento</a>","children":[],"payload":{"lines":"69,70"}},{"content":"<a href=\"#create-shopping-cart\">Criar um Carrinho</a>","children":[],"payload":{"lines":"70,71"}},{"content":"<a href=\"#patch-status\">Alteracao de Status de Pedido</a>","children":[],"payload":{"lines":"71,72"}},{"content":"<a href=\"#get-subsidiary-order\">Consulta de Pedidos da Filial</a>","children":[],"payload":{"lines":"72,73"}}],"payload":{"lines":"64,65"}},{"content":"Controle de Transacoes - BETA","children":[{"content":"<a href=\"#consulta-status-pagamento\">Consulta de Status de Pagamento</a>","children":[],"payload":{"lines":"74,75"}},{"content":"<a href=\"#cancellation-order-and-payment\">Cancelamento de Transacao de Pagamento e Pedido</a>","children":[],"payload":{"lines":"75,76"}}],"payload":{"lines":"73,74"}},{"content":"Pedidos PUC","children":[{"content":"<a href=\"#get-pedido-puc-item\">Historico de Pedidos do Cliente com um Item</a>","children":[],"payload":{"lines":"77,79"}}],"payload":{"lines":"76,77"}},{"content":"<a id=\"post-ecommerce-order\"></a> Gerar pedidos ecommerce","children":[{"content":"<table data-lines=\"82,85\">\n<thead data-lines=\"82,83\">\n<tr data-lines=\"82,83\"><th data-lines=\"82,83\">Método</th><th data-lines=\"82,83\">URL</th></tr>\n</thead>\n<tbody data-lines=\"84,85\">\n<tr><td>POST</td><td>/order/v1/ecommerce/orders</td></tr>\n</tbody>\n</table>","children":[],"payload":{"lines":"82,85"}}],"payload":{"lines":"79,80"}},{"content":"<a id=\"post-ecommerce-panvel-pay\"></a> Criar transacao Panvel Pay","children":[{"content":"<table data-lines=\"91,94\">\n<thead data-lines=\"91,92\">\n<tr data-lines=\"91,92\"><th data-lines=\"91,92\">Método</th><th data-lines=\"91,92\">URL</th></tr>\n</thead>\n<tbody data-lines=\"93,94\">\n<tr><td>PUT</td><td>/order/v1/ecommerce/order/{orderId}/panvelpay</td></tr>\n</tbody>\n</table>","children":[],"payload":{"lines":"91,94"}}],"payload":{"lines":"88,89"}},{"content":"<a id=\"post-order\"></a> Criar Pedido Sem Pagamento","children":[{"content":"<table data-lines=\"100,103\">\n<thead data-lines=\"100,101\">\n<tr data-lines=\"100,101\"><th data-lines=\"100,101\">Método</th><th data-lines=\"100,101\">URL</th></tr>\n</thead>\n<tbody data-lines=\"102,103\">\n<tr><td>POST</td><td>/order/v1/orders</td></tr>\n</tbody>\n</table>","children":[],"payload":{"lines":"100,103"}}],"payload":{"lines":"97,98"}},{"content":"<a id=\"get-order-by-id\"></a> Detalhamento de Pedido","children":[{"content":"<table data-lines=\"109,112\">\n<thead data-lines=\"109,110\">\n<tr data-lines=\"109,110\"><th data-lines=\"109,110\">Método</th><th data-lines=\"109,110\">URL</th></tr>\n</thead>\n<tbody data-lines=\"111,112\">\n<tr><td>GET</td><td>/order/v1/orders/{orderId}</td></tr>\n</tbody>\n</table>","children":[],"payload":{"lines":"109,112"}}],"payload":{"lines":"106,107"}},{"content":"<a id=\"get-customer-orders\"></a> Historico de Pedidos do Cliente","children":[{"content":"<table data-lines=\"118,121\">\n<thead data-lines=\"118,119\">\n<tr data-lines=\"118,119\"><th data-lines=\"118,119\">Método</th><th data-lines=\"118,119\">URL</th></tr>\n</thead>\n<tbody data-lines=\"120,121\">\n<tr><td>GET</td><td>/order/v1/orders/{customerIdentifier}/history</td></tr>\n</tbody>\n</table>","children":[],"payload":{"lines":"118,121"}}],"payload":{"lines":"115,116"}},{"content":"<a id=\"get-status-update\"></a> Historico de Alteracao de Status de Pedido","children":[{"content":"<table data-lines=\"127,130\">\n<thead data-lines=\"127,128\">\n<tr data-lines=\"127,128\"><th data-lines=\"127,128\">Método</th><th data-lines=\"127,128\">URL</th></tr>\n</thead>\n<tbody data-lines=\"129,130\">\n<tr><td>GET</td><td>/order/v1/orders/{orderId}/status/history</td></tr>\n</tbody>\n</table>","children":[],"payload":{"lines":"127,130"}}],"payload":{"lines":"124,125"}},{"content":"<a id=\"get-cancellation-reasons\"></a> Consulta de Razoes de Cancelamento de Pagamento","children":[{"content":"<table data-lines=\"136,139\">\n<thead data-lines=\"136,137\">\n<tr data-lines=\"136,137\"><th data-lines=\"136,137\">Método</th><th data-lines=\"136,137\">URL</th></tr>\n</thead>\n<tbody data-lines=\"138,139\">\n<tr><td>GET</td><td>/order/v1/orders/cancellation/reasons</td></tr>\n</tbody>\n</table>","children":[],"payload":{"lines":"136,139"}}],"payload":{"lines":"133,134"}},{"content":"<a id=\"create-shopping-cart\"></a> Criar um Carrinho","children":[{"content":"<table data-lines=\"145,148\">\n<thead data-lines=\"145,146\">\n<tr data-lines=\"145,146\"><th data-lines=\"145,146\">Método</th><th data-lines=\"145,146\">URL</th></tr>\n</thead>\n<tbody data-lines=\"147,148\">\n<tr><td>POST</td><td>/order/v1/orders/shopping-cart</td></tr>\n</tbody>\n</table>","children":[],"payload":{"lines":"145,148"}}],"payload":{"lines":"142,143"}},{"content":"<a id=\"patch-status\"></a> Atualizacao de Status de Pedido","children":[{"content":"<table data-lines=\"154,157\">\n<thead data-lines=\"154,155\">\n<tr data-lines=\"154,155\"><th data-lines=\"154,155\">Método</th><th data-lines=\"154,155\">URL</th></tr>\n</thead>\n<tbody data-lines=\"156,157\">\n<tr><td>PATCH</td><td>/order/v1/orders/status</td></tr>\n</tbody>\n</table>","children":[],"payload":{"lines":"154,157"}}],"payload":{"lines":"151,152"}},{"content":"<a id=\"get-subsidiary-order\"></a> Consulta de Pedidos da Filial","children":[{"content":"<table data-lines=\"163,166\">\n<thead data-lines=\"163,164\">\n<tr data-lines=\"163,164\"><th data-lines=\"163,164\">Método</th><th data-lines=\"163,164\">URL</th></tr>\n</thead>\n<tbody data-lines=\"165,166\">\n<tr><td>GET</td><td>/order/v1/orders/subsidiary/{subsidiary}</td></tr>\n</tbody>\n</table>","children":[],"payload":{"lines":"163,166"}}],"payload":{"lines":"160,161"}},{"content":"<a id=\"consulta-status-pagamento\"></a> Consulta de Status de Pagamento","children":[{"content":"<table data-lines=\"173,176\">\n<thead data-lines=\"173,174\">\n<tr data-lines=\"173,174\"><th data-lines=\"173,174\">Método</th><th data-lines=\"173,174\">URL</th></tr>\n</thead>\n<tbody data-lines=\"175,176\">\n<tr><td>GET</td><td>/order/v1/transactions/status/{shoppingCartId}</td></tr>\n</tbody>\n</table>","children":[],"payload":{"lines":"173,176"}}],"payload":{"lines":"169,170"}},{"content":"<a id=\"cancellation-order-and-payment\"></a> Cancelar Pagamento e Pedido","children":[{"content":"<table data-lines=\"182,185\">\n<thead data-lines=\"182,183\">\n<tr data-lines=\"182,183\"><th data-lines=\"182,183\">Método</th><th data-lines=\"182,183\">URL</th></tr>\n</thead>\n<tbody data-lines=\"184,185\">\n<tr><td>PUT</td><td>/order/v1/transactions/cancellation/{shoppingCartId}</td></tr>\n</tbody>\n</table>","children":[],"payload":{"lines":"182,185"}}],"payload":{"lines":"179,180"}},{"content":"<a id=\"get-pedido-puc-item\"></a> Historico de pedidos do cliente com um determinado Item ( PUC )","children":[{"content":"<table data-lines=\"191,194\">\n<thead data-lines=\"191,192\">\n<tr data-lines=\"191,192\"><th data-lines=\"191,192\">Método</th><th data-lines=\"191,192\">URL</th></tr>\n</thead>\n<tbody data-lines=\"193,194\">\n<tr><td>GET</td><td>/order/v1/client/{document}/history/items/{itemCode}</td></tr>\n</tbody>\n</table>","children":[],"payload":{"lines":"191,194"}}],"payload":{"lines":"188,189"}}],"payload":{"lines":"59,60"}},{"content":"Fluxo de Venda entre os canais","children":[{"content":"Mapa de atributos pedido-service x order-service","children":[],"payload":{"lines":"201,202"}}],"payload":{"lines":"197,198"}}],"payload":{"lines":"1,2"}},null)</script>
</body>
</html>
